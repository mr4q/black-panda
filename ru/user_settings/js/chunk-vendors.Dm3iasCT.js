import{d as W,r as le,u as ce,e as de,b as ue,f as _e,q as N,o as c,g as d,t as _,h as u,i as l,j as n,k as S,E as F,w as b,l as fe,m as pe,n as I,p as B,s as L,v as C,x as me,y as ge,z as A,A as H,B as Q,C as he,D as ve,F as be,G as te,H as $e,I as Z,J as se,K as ye,L as Se,M as we,N as O,O as D,P as U,Q as Y,R as J,S as z,T as R,U as oe,V as ae,W as ke,X as Ve,Y as Ce,Z as Ue,_ as Fe,$ as Pe,a0 as Me,a1 as Te,a2 as xe,a3 as De,a4 as Ae,a5 as Ee,a6 as Ie,a7 as Be,a8 as Le}from"./chunk-vendors.DqlmKxR8.js";const P={lng:"ru",trans:{"profile.heading":"Ваш профиль","profile.name":"Имя","profile.lastname":"Фамилия","profile.phone":"Телефон","profile.skype":"Skype","profile.website":"Сайт","profile.old-password":"Старый пароль","profile.password-1":"Пароль","profile.password-2":"Повторно пароль","profile.settings.heading":"Ваши персональные настройки","profile.settings.signature":"Подпись при ответе","profile.settings.trans":"Язык по умолчанию","profile.settings.image":"Ваш аватар/фото","profile.settings.tabs.notify":"Оповещения","profile.settings.notify.browser-notify":"Всплывающие оповещение о новых заявках","profile.settings.notify.new-post-notify":"Всплывающие оповещение о новом ответе в заявке","profile.settings.notify.new-all-post-notify":"Всплывающие оповещение о любом новом ответе в заявках","profile.settings.notify.owner-change-notify":"Всплывающие оповещение о назначении Вас в качестве исполнителя заявки","profile.settings.notify.new-comment-notify":"Всплывающие оповещение о новом комментарии в заявке","profile.settings.notify.sound-notify":"Звуковое оповещение","buttons.save":"Сохранить","buttons.search":"Искать","buttons.clear":"Очистить","buttons.yes":"Да","buttons.no":"Нет","buttons.confirm":"Подтвердить","buttons.cancel":"Отмена","buttons.generate-password":"Генерировать пароль","buttons.upload-image":"Загрузить изображение","buttons.delete":"Удалить","buttons.last-month":"Последний месяц","buttons.current-month":"Текущий месяц","confirm.delete":"Удалить?","notifications.update-profile.success":"Настройки профиля успешно сохранены!","notifications.update-profile.error":"Не удалось сохранить настройки профиля!","notifications.update-personal-settings.success":"Персональные настройки успешно сохранены!","notifications.update-personal-settings.error":"Не удалось сохранить персональные настройки!","notifications.update-notifications.success":"Настройки оповещений успешно сохранены!","notifications.update-notifications.error":"Не удалось сохранить настройки оповещений!","notifications.upload-user-image.success":"Изображение успешно загружено!","notifications.upload-user-image.error":"Не удалось загрузить изображение!","notifications.delete-user-image.success":"Изображение успешно удалено!","notifications.delete-user-image.error":"Не удалось удалить изображение!","profile.settings.timezone":"Часовой пояс","profile.generated-password":"Сгенерированный пароль","satisfaction.heading":"Оценки по заявкам","satisfaction.list.created-at":"Дата и время","satisfaction.list.ticket":"Заявка","satisfaction.list.ticket-id":"ID заявки","satisfaction.list.client":"Клиент","satisfaction.list.department":"Департамент","satisfaction.list.vote":"Отзыв","satisfaction.list.comment":"Комментарий","satisfaction.average-rate":"Средняя оценка","satisfaction.satisfaction-rate":"Коэффициент удовлетворенности","placeholders.date-from":"Дата от","placeholders.date-to":"Дата до","placeholders.choose":"Выбрать","placeholders.search":"Поиск"},timezones:[{id:"Pacific/Midway",name:"[UTC -11:00] Midway Island, Samoa"},{id:"Pacific/Tahiti",name:"[UTC -10:00] Hawaii"},{id:"America/Yakutat",name:"[UTC -09:00] Alaska"},{id:"America/Los_Angeles",name:"[UTC -08:00] Pacific Time (US and Canada); Tijuana"},{id:"America/Phoenix",name:"[UTC -07:00] Mountain Time (US and Canada)"},{id:"America/Chicago",name:"[UTC -06:00] Central Time (US and Canada)"},{id:"America/Toronto",name:"[UTC -05:00] Eastern Time (US and Canada)"},{id:"America/Dominica",name:"[UTC -04:00] Atlantic Time (Canada)"},{id:"America/Cayenne",name:"[UTC -03:00] Greenland"},{id:"America/Araguaina",name:"[UTC -02:00] Mid-Atlantic"},{id:"America/Scoresbysund",name:"[UTC -01:00] Azores"},{id:"Europe/London",name:"[UTC 00:00] Dublin, Edinburgh, Lisbon, London"},{id:"Europe/Berlin",name:"[UTC +01:00] Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna"},{id:"Europe/Riga",name:"[UTC +02:00] Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius"},{id:"Europe/Moscow",name:"[UTC +03:00] Moscow, St. Petersburg, Volgograd"},{id:"Europe/Samara",name:"[UTC +04:00] Baku, Tbilisi, Yerevan, Samara"},{id:"Asia/Yekaterinburg",name:"[UTC +05:00] Yekaterinburg"},{id:"Asia/Almaty",name:"[UTC +06:00] Astana, Dhaka, Almaty"},{id:"Asia/Bangkok",name:"[UTC +07:00] Bangkok, Hanoi, Jakarta, Krasnoyarsk"},{id:"Asia/Hong_Kong",name:"[UTC +08:00] Beijing, Chongqing, Hong Kong SAR, Urumqi"},{id:"Asia/Tokyo",name:"[UTC +09:00] Osaka, Sapporo, Tokyo, Yakutsk"},{id:"Asia/Vladivostok",name:"[UTC +10:00] Canberra, Melbourne, Sydney, Vladivostok"},{id:"Asia/Magadan",name:"[UTC +11:00] Magadan, Solomon Islands, New Caledonia"},{id:"Asia/Kamchatka",name:"[UTC +12:00] Fiji Islands, Kamchatka, Marshall Islands"}],languages:["ru","en","ua","cst"],notifications:[{id:"browser_notify",label:"browser-notify"},{id:"new_post_notify",label:"new-post-notify"},{id:"new_all_post_notify",label:"new-all-post-notify"},{id:"owner_change_notify",label:"owner-change-notify"},{id:"new_comment_notify",label:"new-comment-notify"},{id:"sound_notify",label:"sound-notify"}]},G=P.trans,Ye=()=>{switch(P.lng){case"en":return W.locale("en"),de;case"ua":case"uk":return W.locale("uk"),ce;default:return W.locale("ru"),le}},y=(t,e=[])=>{if(G[t]===void 0)return t;if(e.length===0)return G[t];{let s=G[t];return e.forEach(a=>{s=s.replace(`:${a[0]}`,a[1])}),s}},M=ue.create({headers:{"x-requested-with":"XMLHttpRequest","x-csrf-token":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}),T=`http://localhost:3002/${P.lng}/user_settings`,v=_e("user-settings",{state:()=>({profile:{form:null,data:null,errors:null,loading:null},personal_settings:{form:null,formData:null,loading:null},notifications:{form:null,formData:null,loading:null},user_satisfaction:{data:null,params:null,loading:null}}),actions:{getProfileForm(){return M.get(`${T}/profile/action/form`).then(({data:t})=>t).catch(t=>console.log(t))},updateProfile({data:t}){return M.put(`${T}/profile/action/form`,N.stringify(t)).then(({data:e})=>e).catch(e=>console.log(e))},generatePassword(){return M.post(`${T}/profile/action/generate_password`).then(({data:t})=>t).catch(t=>console.log(t))},getPersonalSettingsForm(){return M.get(`${T}/personal_settings/action/form`).then(({data:t})=>t).catch(t=>console.log(t))},updatePersonalSettings({data:t}){return M.put(`${T}/personal_settings/action/form`,N.stringify(t)).then(({data:e})=>e).catch(e=>console.log(e))},deleteUserImage(){return M.delete(`${T}/personal_settings/action/user_image`).then(({data:t})=>t).catch(t=>console.log(t))},getNotificationsForm(){return M.get(`${T}/notifications/action/form`).then(({data:t})=>t).catch(t=>console.log(t))},updateNotifications({data:t}){return M.put(`${T}/notifications/action/form`,N.stringify(t)).then(({data:e})=>e).catch(e=>console.log(e))},getUserSatisfaction(t){return M.get(`${T}/user_satisfaction/action/data`,{params:t}).then(({data:e})=>e).catch(e=>console.log(e))},loadMoreOptions(t){return M.post(`${T}/action/load_more`,N.stringify(t)).then(({data:e})=>e).catch(e=>console.log(e))},async getUserSatisfactionByParams(t){this.user_satisfaction.loading=!0;const{data:e}=await this.getUserSatisfaction(t);this.user_satisfaction.loading=!1,this.user_satisfaction.data=e}}}),V=(t,e)=>{const s=t.__vccOpts||t;for(const[a,o]of e)s[a]=o;return s},qe={},Oe={class:"profile-form__heading"};function He(t,e){return c(),d("div",Oe,_(t.$trans("profile.heading")),1)}const Ne=V(qe,[["render",He],["__scopeId","data-v-0522f408"]]),ze={class:"profile-form__field profile-form__field-name"},Re={class:"profile-form__field-label"},je={class:"profile-form__field-input"},Ke={key:0,class:"profile-form__field-error"},We={__name:"ProfileName",setup(t){const e=v();return(s,a)=>{var i;const o=F;return c(),d("div",ze,[u("div",Re,_(s.$trans("profile.name")),1),u("div",je,[l(o,{modelValue:n(e).profile.form.name,"onUpdate:modelValue":a[0]||(a[0]=r=>n(e).profile.form.name=r),clearable:""},null,8,["modelValue"]),(i=n(e).profile.errors)!=null&&i.name?(c(),d("div",Ke,_(n(e).profile.errors.name),1)):S("",!0)])])}}},Ge={class:"profile-form__field profile-form__field-lastname"},Ze={class:"profile-form__field-label"},Je={class:"profile-form__field-input"},Xe={key:0,class:"profile-form__field-error"},Qe={__name:"ProfileLastname",setup(t){const e=v();return(s,a)=>{var i;const o=F;return c(),d("div",Ge,[u("div",Ze,_(s.$trans("profile.lastname")),1),u("div",Je,[l(o,{modelValue:n(e).profile.form.lastname,"onUpdate:modelValue":a[0]||(a[0]=r=>n(e).profile.form.lastname=r),clearable:""},null,8,["modelValue"]),(i=n(e).profile.errors)!=null&&i.lastname?(c(),d("div",Xe,_(n(e).profile.errors.lastname),1)):S("",!0)])])}}},et={class:"profile-form__field profile-form__field-phone"},tt={class:"profile-form__field-label"},st={class:"profile-form__field-input"},ot={key:0,class:"profile-form__field-error"},at={__name:"ProfilePhone",setup(t){const e=v();return(s,a)=>{var i;const o=F;return c(),d("div",et,[u("div",tt,_(s.$trans("profile.phone")),1),u("div",st,[l(o,{modelValue:n(e).profile.form.phone,"onUpdate:modelValue":a[0]||(a[0]=r=>n(e).profile.form.phone=r),clearable:""},null,8,["modelValue"]),(i=n(e).profile.errors)!=null&&i.phone?(c(),d("div",ot,_(n(e).profile.errors.phone),1)):S("",!0)])])}}},nt={class:"profile-form__field profile-form__field-skype"},it={class:"profile-form__field-label"},rt={class:"profile-form__field-input"},lt={key:0,class:"profile-form__field-error"},ct={__name:"ProfileSkype",setup(t){const e=v();return(s,a)=>{var i;const o=F;return c(),d("div",nt,[u("div",it,_(s.$trans("profile.skype")),1),u("div",rt,[l(o,{modelValue:n(e).profile.form.skype,"onUpdate:modelValue":a[0]||(a[0]=r=>n(e).profile.form.skype=r),clearable:""},null,8,["modelValue"]),(i=n(e).profile.errors)!=null&&i.skype?(c(),d("div",lt,_(n(e).profile.errors.skype),1)):S("",!0)])])}}},dt={class:"profile-form__field profile-form__field-website"},ut={class:"profile-form__field-label"},_t={class:"profile-form__field-input"},ft={key:0,class:"profile-form__field-error"},pt={__name:"ProfileWebsite",setup(t){const e=v();return(s,a)=>{var i;const o=F;return c(),d("div",dt,[u("div",ut,_(s.$trans("profile.website")),1),u("div",_t,[l(o,{modelValue:n(e).profile.form.website,"onUpdate:modelValue":a[0]||(a[0]=r=>n(e).profile.form.website=r),clearable:""},null,8,["modelValue"]),(i=n(e).profile.errors)!=null&&i.website?(c(),d("div",ft,_(n(e).profile.errors.website),1)):S("",!0)])])}}},mt={class:"profile-form__field profile-form__field-old-password"},gt={class:"profile-form__field-label"},ht={class:"profile-form__field-input"},vt={key:0,class:"profile-form__field-error"},bt={__name:"ProfileOldPassword",setup(t){const e=v();return(s,a)=>{var i;const o=F;return c(),d("div",mt,[u("div",gt,_(s.$trans("profile.old-password")),1),u("div",ht,[l(o,{modelValue:n(e).profile.form.old_password,"onUpdate:modelValue":a[0]||(a[0]=r=>n(e).profile.form.old_password=r),"show-password":"",clearable:""},null,8,["modelValue"]),(i=n(e).profile.errors)!=null&&i.old_password?(c(),d("div",vt,_(n(e).profile.errors.old_password),1)):S("",!0)])])}}},$t={class:"profile-form__field profile-form__field-password-1"},yt={class:"profile-form__field-label"},St={class:"profile-form__field-input"},wt={key:0,class:"profile-form__field-error"},kt={__name:"ProfilePassword",setup(t){const e=v(),s=async()=>{e.profile.loading=!0;const{password:a}=await e.generatePassword();e.profile.loading=!1;try{const{value:o}=await pe.prompt(y("profile.generated-password"),"",{inputValue:a,confirmButtonText:y("buttons.confirm"),cancelButtonText:y("buttons.cancel")});e.profile.form.password=o,e.profile.form.password_2=o}catch{e.profile.form.password="",e.profile.form.password_2=""}};return(a,o)=>{var f;const i=I,r=F;return c(),d("div",$t,[u("div",yt,_(n(y)("profile.password-1")),1),u("div",St,[l(r,{modelValue:n(e).profile.form.password,"onUpdate:modelValue":o[0]||(o[0]=m=>n(e).profile.form.password=m),"show-password":"",clearable:""},{append:b(()=>[l(i,{class:"profile-form__generate-password",title:n(y)("buttons.generate-password"),icon:n(fe),onClick:s},null,8,["title","icon"])]),_:1},8,["modelValue"]),(f=n(e).profile.errors)!=null&&f.password?(c(),d("div",wt,_(n(e).profile.errors.password),1)):S("",!0)])])}}},Vt={class:"profile-form__field profile-form__field-password-2"},Ct={class:"profile-form__field-label"},Ut={class:"profile-form__field-input"},Ft={key:0,class:"profile-form__field-error"},Pt={__name:"ProfilePassword2",setup(t){const e=v();return(s,a)=>{var i;const o=F;return c(),d("div",Vt,[u("div",Ct,_(s.$trans("profile.password-2")),1),u("div",Ut,[l(o,{modelValue:n(e).profile.form.password_2,"onUpdate:modelValue":a[0]||(a[0]=r=>n(e).profile.form.password_2=r),"show-password":"",clearable:""},null,8,["modelValue"]),(i=n(e).profile.errors)!=null&&i.password_2?(c(),d("div",Ft,_(n(e).profile.errors.password_2),1)):S("",!0)])])}}},Mt={__name:"CustomFieldText",props:B({id:{type:String,required:!0},disabled:{type:Boolean,required:!0}},{modelValue:{type:[Number,String]},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=L(t,"modelValue"),s=t,a=()=>{const i="^(\\b(https?|ftp|file)://)[-A-Za-zА-Яа-я0-9+&@#/%?=~_|!:,.;]+[-A-Za-zА-Яа-я0-9+&@#/%=~_|]$";return!e.value||typeof e.value!="string"?!1:e.value.match(i)},o=()=>{window.open(e.value,"_blank")};return(i,r)=>{const f=I,m=F;return c(),C(m,{id:s.id,modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=g=>e.value=g),disabled:s.disabled},me({_:2},[a()?{name:"append",fn:b(()=>[l(f,{icon:n(ge),onClick:r[0]||(r[0]=g=>o())},null,8,["icon"])]),key:"0"}:void 0]),1032,["id","modelValue","disabled"])}}},Tt={__name:"CustomFieldTextarea",props:B({id:{type:String,required:!0},disabled:{type:Boolean,required:!0}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=L(t,"modelValue"),s=t;return(a,o)=>{const i=F;return c(),C(i,{id:s.id,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=r=>e.value=r),disabled:s.disabled,autosize:{minRows:1,maxRows:10},type:"textarea",resize:"none"},null,8,["id","modelValue","disabled"])}}},xt={__name:"InfiniteSelect",props:B({field:{type:String,required:!0},options:{type:Array,required:!0},loadMoreOptions:{type:Function,required:!1,default:null},loadMore:{type:Boolean,default:!1},id:{type:[Array,String,Number],default:null},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},defaultValue:{type:[Array,String,Number],default:null},clearable:{type:Boolean,default:!0}},{modelValue:{type:[Number,String]},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=L(t,"modelValue"),s=t,a=A([]),o=A([]),i=A(null);let r=null;H(()=>{a.value=e.value??s.defaultValue,K(),s.loadMore&&f()});const f=()=>{o.value.length!==0&&Q(()=>{r=document.querySelector(`.infinite-select-${s.field} .el-plus-select-dropdown__list`),i.value=null,he(r.querySelector("div"),()=>{i.value&&(r.scrollTop=i.value)}),ve(r,k,{distance:10})})},m=A(1),g=A(!1),p=A(!1),h=A(null),k=async()=>{if(g.value)return;m.value++;const $=await s.loadMoreOptions({field:s.field,page:m.value,search:h.value,id:s.id});if(!$||$.length===0){g.value=!0;return}o.value=[...o.value,...$.filter(x=>s.multiple?!a.value.includes(x.value):a.value!==x.value)],i.value=m.value===1?0:r.scrollTop},w=async()=>{m.value=1,g.value=!1,o.value=await s.loadMoreOptions({field:s.field,page:m.value,search:h.value,ids:h.value?null:a.value,id:s.id})},E=async $=>{$===""?o.value=s.options:(h.value=$.length>0?$:null,p.value=!0,await w(),p.value=!1,f())},q=async $=>{if(i.value=null,!($||!$&&!h.value))if(h.value=null,s.loadMore){const x=o.value.length===0;await w(),x&&f()}else K()},j=()=>{e.value=a.value,Q(()=>{document.activeElement&&document.activeElement.blur()})},ne=$=>{h.value=$.length>0?$:null,h.value?(p.value=!0,o.value=s.options.filter(x=>x.label.toLowerCase().includes($.toLowerCase())),p.value=!1):K()},K=()=>{o.value=s.options.map($=>($.label=$.label.toString(),$))};return($,x)=>{const ie=be;return c(),d("div",null,[l(ie,{modelValue:a.value,"onUpdate:modelValue":x[0]||(x[0]=re=>a.value=re),"remote-method":t.loadMore?E:ne,"popper-class":`infinite-select-${t.field}`,options:o.value,loading:p.value,placeholder:$.$trans("placeholders.search"),multiple:t.multiple,filterable:"",remote:"",clearable:t.clearable,disabled:t.disabled,onChange:j,onVisibleChange:q},null,8,["modelValue","remote-method","popper-class","options","loading","placeholder","multiple","clearable","disabled"])])}}},Dt={__name:"CustomFieldSelect",props:B({id:{type:String,required:!0},fieldId:{type:Number,required:!0},disabled:{type:Boolean,required:!0},options:{type:Array,required:!0},loadMoreOptions:{type:Function,required:!0}},{modelValue:{type:[Number,String]},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=L(t,"modelValue"),s=t;return(a,o)=>(c(),C(xt,{id:s.fieldId,key:"customFieldSelect",modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=i=>e.value=i),field:"custom-field-select",options:s.options,"load-more-options":s.loadMoreOptions,"load-more":!0,multiple:!1,placeholder:a.$trans("placeholders.choose")},null,8,["id","modelValue","options","load-more-options","placeholder"]))}},At={__name:"CustomFieldDate",props:B({id:{type:String,required:!0},disabled:{type:Boolean,required:!0}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=L(t,"modelValue"),s=t;return(a,o)=>{const i=te;return c(),C(i,{id:s.id,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=r=>e.value=r),type:"date",format:"DD.MM.YYYY","value-format":"DD.MM.YYYY",disabled:t.disabled},null,8,["id","modelValue","disabled"])}}},Et={__name:"CustomFieldCheckbox",props:B({id:{type:String,required:!0},disabled:{type:Boolean,required:!0}},{modelValue:{type:Number},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=L(t,"modelValue"),s=t;return(a,o)=>{const i=$e;return c(),C(i,{id:s.id,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=r=>e.value=r),disabled:s.disabled,"true-value":1,"false-value":0},null,8,["id","modelValue","disabled"])}}},It=["data-id"],Bt={__name:"CustomFieldHierarchy",props:B({id:{type:String,required:!0},disabled:{type:Boolean,required:!0},options:{type:Array,required:!0}},{modelValue:{type:Array},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=L(t,"modelValue"),s=t,a={},o=Z(()=>{const f=[];return e.value&&e.value.length>0&&e.value.forEach(m=>{a[m]&&f.push(a[m])}),f.join(" / ")}),i=({text:f},m)=>f.toString().toLowerCase().includes(m.toLowerCase()),r=f=>{f.forEach(m=>{a[m.id]=m.label,m.children&&r(m.children)})};return se(()=>{r(s.options)}),(f,m)=>{const g=ye;return c(),C(g,{id:s.id,modelValue:e.value,"onUpdate:modelValue":m[0]||(m[0]=p=>e.value=p),disabled:t.disabled,options:s.options,"show-all-levels":!0,"filter-method":i,title:o.value,"popper-class":`profile-fields__field-input_hierarchy profile-fields__custom-field-${t.id}-popper`,clearable:"",filterable:""},{default:b(({data:p})=>[u("span",{"data-id":p.id},_(p.label),9,It)]),_:1},8,["id","modelValue","disabled","options","title","popper-class"])}}},Lt={__name:"ProfileCustomFieldInput",props:{customField:{type:Object,required:!0}},setup(t){const e=t,s=v();let a=null,o=null;const i=Z(()=>!e.customField.editable),r=m=>{switch(m){case"number":case"text":return Mt;case"textarea":return Tt;case"select":return Dt;case"date":return At;case"checkbox":return Et;case"hierarchy":return Bt}},f=m=>{switch(m){case"select":return{id:`profile-custom-field-${e.customField.id}`,fieldId:e.customField.id,options:e.customField.options,loadMoreOptions:s.loadMoreOptions};case"hierarchy":return{id:`profile-custom-field-${e.customField.id}`,options:e.customField.options};default:return{id:`profile-custom-field-${e.customField.id}`}}};return se(()=>{a=r(e.customField.type),o=f(e.customField.type)}),(m,g)=>(c(),C(we(n(a)),Se({modelValue:n(s).profile.form.customFields[e.customField.id],"onUpdate:modelValue":g[0]||(g[0]=p=>n(s).profile.form.customFields[e.customField.id]=p)},n(o),{disabled:i.value}),null,16,["modelValue","disabled"]))}},Yt=["data-custom-fields-group-id"],qt={class:"profile-form__custom-fields-group__name"},Ot={class:"profile-form__custom-fields-group__fields"},Ht=["data-custom-field-id"],Nt={class:"profile-form__field-label"},zt={class:"profile-form__field-input"},Rt={key:0,class:"profile-form__field-error"},jt={__name:"ProfileCustomFields",setup(t){const e=v();return(s,a)=>(c(!0),d(D,null,O(n(e).profile.data.customFields.groups,o=>(c(),d("div",{key:o.id,"data-custom-fields-group-id":o.id,class:"profile-form__block profile-form__custom-fields-group"},[u("div",qt,_(o.name),1),u("div",Ot,[(c(!0),d(D,null,O(o.fields,i=>{var r,f;return c(),d("div",{key:i.id,"data-custom-field-id":i.id,class:"profile-form__field profile-form__custom-field"},[u("div",Nt,_(i.name),1),u("div",zt,[l(Lt,{"custom-field":i},null,8,["custom-field"]),(f=(r=n(e).profile.errors)==null?void 0:r.customFields)!=null&&f[i.id]?(c(),d("div",Rt,_(n(e).profile.errors.customFields[i.id]),1)):S("",!0)])],8,Ht)}),128))])],8,Yt))),128))}},Kt=V(jt,[["__scopeId","data-v-c26fa265"]]),Wt={class:"profile-form__content"},Gt={class:"profile-form__block"},Zt={class:"profile-form__block"},Jt={__name:"ProfileFormContent",setup(t){return(e,s)=>(c(),d("div",Wt,[u("div",Gt,[l(We),l(Qe),l(at),l(ct),l(pt)]),u("div",Zt,[l(bt),l(kt),l(Pt)]),l(Kt)]))}},Xt=V(Jt,[["__scopeId","data-v-1151bb8d"]]),Qt={class:"profile-form__submit"},es={__name:"ProfileFormSubmit",setup(t){const e=v(),s=async()=>{e.profile.loading=!0;const{errors:a}=await e.updateProfile({data:e.profile.form});console.log({errors:a}),a?e.profile.errors=a:e.profile.errors=null,e.profile.loading=!1;const o={message:y(`notifications.update-profile.${a?"error":"success"}`),type:`${a?"error":"success"}`,customClass:"hde-custom"};Y(o)};return(a,o)=>{const i=I;return c(),d("div",Qt,[l(i,{type:"primary",class:"profile-form__save-button",onClick:s},{default:b(()=>[U(_(n(y)("buttons.save")),1)]),_:1})])}}},ts=V(es,[["__scopeId","data-v-0dba366e"]]),ss={class:"profile-form"},os={__name:"ProfileForm",setup(t){const e=v(),s=async()=>{e.profile.loading=!0;const{form:o,data:i}=await e.getProfileForm();e.profile.loading=!1,e.profile.form=o,e.profile.data=i},a=async()=>{e.profile.form=null,e.profile.data=null};return H(()=>{s()}),J(()=>{a()}),(o,i)=>{const r=R;return z((c(),d("div",ss,[n(e).profile.form?(c(),d(D,{key:0},[l(Ne),l(Xt),l(ts)],64)):S("",!0)])),[[r,n(e).profile.loading]])}}},as={},ns={class:"personal-settings-form__heading"};function is(t,e){return c(),d("div",ns,_(t.$trans("profile.settings.heading")),1)}const rs=V(as,[["render",is],["__scopeId","data-v-dc99ec74"]]),ls={class:"personal-settings-form__field personal-settings-form__field-timezone"},cs={class:"personal-settings-form__field-label"},ds={class:"personal-settings-form__field-input"},us={__name:"PersonalSettingsTimezone",setup(t){const e=v(),s=P.timezones;return(a,o)=>{const i=oe,r=ae;return c(),d("div",ls,[u("div",cs,_(a.$trans("profile.settings.timezone")),1),u("div",ds,[l(r,{modelValue:n(e).personal_settings.form.timezone,"onUpdate:modelValue":o[0]||(o[0]=f=>n(e).personal_settings.form.timezone=f),filterable:""},{default:b(()=>[(c(!0),d(D,null,O(n(s),f=>(c(),C(i,{key:f.id,value:f.id,label:f.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])])}}},_s={class:"personal-settings-form__field personal-settings-form__field-language"},fs={class:"personal-settings-form__field-label"},ps={class:"personal-settings-form__field-input"},ms={__name:"PersonalSettingsLanguage",setup(t){const e=v(),s=P.languages;return(a,o)=>{const i=oe,r=ae;return c(),d("div",_s,[u("div",fs,_(a.$trans("profile.settings.trans")),1),u("div",ps,[l(r,{modelValue:n(e).personal_settings.form.language,"onUpdate:modelValue":o[0]||(o[0]=f=>n(e).personal_settings.form.language=f)},{default:b(()=>[(c(!0),d(D,null,O(n(s),f=>{var m;return c(),C(i,{key:f,value:f,label:(m=f==null?void 0:f.toString())==null?void 0:m.toUpperCase()},null,8,["value","label"])}),128))]),_:1},8,["modelValue"])])])}}},gs={class:"personal-settings-form__field personal-settings-form__field-image"},hs={class:"personal-settings-form__field-label"},vs={class:"personal-settings-form__field-input"},bs={__name:"PersonalSettingsImage",setup(t){const e=v(),s=A(null),a=`//localhost:3002/${P.lng}/user_settings/personal_settings/action/user_image`,i={"x-csrf-token":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},r=async()=>{e.personal_settings.loading=!0;const p=await e.deleteUserImage();e.personal_settings.loading=!1,p&&(e.personal_settings.form.image=null);const h={message:y(`notifications.delete-user-image.${p?"success":"error"}`),type:`${p?"success":"error"}`,customClass:"hde-custom"};Y(h)},f=()=>{e.personal_settings.loading=!0},m=p=>{e.personal_settings.loading=!1;const{image:h}=p;if(!h)return;e.personal_settings.form.image=h,s.value.clearFiles();const k={message:y("notifications.upload-user-image.success"),type:"success",customClass:"hde-custom"};Y(k)},g=p=>{e.personal_settings.loading=!1,console.log({error:p});const h={message:y("notifications.upload-user-image.error"),type:"error",customClass:"hde-custom"};Y(h)};return(p,h)=>{const k=Ce,w=I,E=Ue,q=Fe;return c(),d("div",gs,[u("div",hs,_(n(y)("profile.settings.image")),1),u("div",vs,[u("div",null,[n(e).personal_settings.form.image?(c(),C(k,{key:0,src:n(e).personal_settings.form.image.url,fit:"cover",style:{width:"60px",height:"60px"}},null,8,["src"])):S("",!0)]),u("div",null,[l(E,{ref_key:"userImage",ref:s,"auto-upload":!0,"show-file-list":!1,limit:1,accept:".jpg, .png",headers:i,action:a,"before-upload":f,"on-success":m,"on-error":g},{default:b(()=>[l(w,{link:"",type:"primary",class:"personal-settings-form__upload-image",icon:n(ke)},{default:b(()=>[U(_(n(y)("buttons.upload-image")),1)]),_:1},8,["icon"])]),_:1},512),n(e).personal_settings.form.image?(c(),C(q,{key:0,title:n(y)("confirm.delete"),"confirm-button-text":n(y)("buttons.yes"),"cancel-button-text":n(y)("buttons.no"),"hide-after":0,width:"200",onConfirm:r},{reference:b(()=>[l(w,{link:"",type:"danger",class:"personal-settings-form__delete-image",icon:n(Ve)},{default:b(()=>[U(_(n(y)("buttons.delete")),1)]),_:1},8,["icon"])]),_:1},8,["title","confirm-button-text","cancel-button-text"])):S("",!0)])])])}}},$s={class:"personal-settings-form__field personal-settings-form__field-signature"},ys={class:"personal-settings-form__field-label"},Ss={class:"personal-settings-form__field-input"},ws={__name:"PersonalSettingsSignature",setup(t){const e=v();return(s,a)=>{const o=F;return c(),d("div",$s,[u("div",ys,_(s.$trans("profile.settings.signature")),1),u("div",Ss,[l(o,{modelValue:n(e).personal_settings.form.signature,"onUpdate:modelValue":a[0]||(a[0]=i=>n(e).personal_settings.form.signature=i),type:"textarea",autosize:"",clearable:""},null,8,["modelValue"])])])}}},ks={class:"personal-settings-form__content"},Vs={class:"personal-settings-form__block"},Cs={__name:"PersonalSettingsFormContent",setup(t){return(e,s)=>(c(),d("div",ks,[u("div",Vs,[l(us),l(ms),l(bs),l(ws)])]))}},Us=V(Cs,[["__scopeId","data-v-265c83ad"]]),Fs={class:"personal-settings-form__submit"},Ps={__name:"PersonalSettingsFormSubmit",setup(t){const e=v(),s=async()=>{e.personal_settings.loading=!0;const a=await e.updatePersonalSettings({data:e.personal_settings.form});e.personal_settings.loading=!1;const o={message:y(`notifications.update-personal-settings.${a?"success":"error"}`),type:`${a?"success":"error"}`,customClass:"hde-custom"};Y(o)};return(a,o)=>{const i=I;return c(),d("div",Fs,[l(i,{type:"primary",class:"personal-settings-form__save-button",onClick:s},{default:b(()=>[U(_(n(y)("buttons.save")),1)]),_:1})])}}},Ms=V(Ps,[["__scopeId","data-v-260e149f"]]),Ts={class:"personal-settings-form"},xs={__name:"PersonalSettingsForm",setup(t){const e=v(),s=async()=>{e.personal_settings.loading=!0;const{form:o,data:i}=await e.getPersonalSettingsForm();e.personal_settings.loading=!1,e.personal_settings.form=o,e.personal_settings.formData=i},a=async()=>{e.personal_settings.form=null,e.personal_settings.formData=null};return H(()=>{s()}),J(()=>{a()}),(o,i)=>{const r=R;return z((c(),d("div",Ts,[n(e).personal_settings.form?(c(),d(D,{key:0},[l(rs),l(Us),l(Ms)],64)):S("",!0)])),[[r,n(e).personal_settings.loading]])}}},Ds={},As={class:"notifications-form__heading"};function Es(t,e){return c(),d("div",As,_(t.$trans("profile.settings.tabs.notify")),1)}const Is=V(Ds,[["render",Es],["__scopeId","data-v-f571be55"]]),Bs={class:"notifications-form__content"},Ls={class:"notifications-form__block"},Ys={class:"notifications-form__field-label"},qs={class:"notifications-form__field-input"},Os={__name:"NotificationsFormContent",setup(t){const e=v(),s=P.notifications;return(a,o)=>{const i=Me;return c(),d("div",Bs,[u("div",Ls,[(c(!0),d(D,null,O(n(s),r=>(c(),d("div",{key:r.id,class:Pe(["notifications-form__field",`notifications-form__field-${r.id}`])},[u("div",Ys,_(a.$trans(`profile.settings.notify.${r.label}`)),1),u("div",qs,[l(i,{modelValue:n(e).notifications.form[r.id],"onUpdate:modelValue":f=>n(e).notifications.form[r.id]=f,"active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])])],2))),128))])])}}},Hs=V(Os,[["__scopeId","data-v-a39ea198"]]),Ns={class:"notifications-form__submit"},zs={__name:"NotificationsFormSubmit",setup(t){const e=v(),s=async()=>{e.notifications.loading=!0;const a=await e.updateNotifications({data:e.notifications.form});e.notifications.loading=!1;const o={message:y(`notifications.update-notifications.${a?"success":"error"}`),type:`${a?"success":"error"}`,customClass:"hde-custom"};Y(o)};return(a,o)=>{const i=I;return c(),d("div",Ns,[l(i,{type:"primary",class:"notifications-form__save-button",onClick:s},{default:b(()=>[U(_(n(y)("buttons.save")),1)]),_:1})])}}},Rs=V(zs,[["__scopeId","data-v-690113ac"]]),js={class:"notifications-form"},Ks={__name:"NotificationsForm",setup(t){const e=v(),s=async()=>{e.notifications.loading=!0;const{form:o,data:i}=await e.getNotificationsForm();e.notifications.loading=!1,e.notifications.form=o,e.notifications.formData=i},a=async()=>{e.notifications.form=null,e.notifications.formData=null};return H(()=>{s()}),J(()=>{a()}),(o,i)=>{const r=R;return z((c(),d("div",js,[n(e).notifications.form?(c(),d(D,{key:0},[l(Is),l(Hs),l(Rs)],64)):S("",!0)])),[[r,n(e).notifications.loading]])}}},Ws={},Gs={class:"user-satisfaction__heading"};function Zs(t,e){return c(),d("div",Gs,_(t.$trans("satisfaction.heading")),1)}const Js=V(Ws,[["render",Zs],["__scopeId","data-v-69c49391"]]),Xs={class:"user-satisfaction__filters"},Qs={class:"user-satisfaction__filter user-satisfaction__filter_date"},eo={class:"user-satisfaction__filter user-satisfaction__filter_date"},to={class:"user-satisfaction__filter user-satisfaction__filter_buttons"},so={__name:"UserSatisfactionFilters",setup(t){const e=v(),s=Z(()=>Object.keys(e.user_satisfaction.params).length>1),a=()=>{let g={};Object.keys(e.user_satisfaction.params).forEach(p=>{e.user_satisfaction.params[p]&&e.user_satisfaction.params[p]!==""&&(g[p]=e.user_satisfaction.params[p])}),e.user_satisfaction.params={...g},e.user_satisfaction.params.page=1,history.pushState(null,"",`/${P.lng}/user_settings/user_satisfaction/?`+new URLSearchParams(e.user_satisfaction.params).toString()),e.getUserSatisfactionByParams(e.user_satisfaction.params)},o=g=>{const[p,h]=g.split(" "),[k,w,E]=p.split("."),[q,j]=h.split(":");return new Date(+E,+w-1,+k,+q,+j)},i=()=>{if(!e.user_satisfaction.params.date_to||!e.user_satisfaction.params.date_from)return;const g=o(e.user_satisfaction.params.date_from),p=o(e.user_satisfaction.params.date_to);+g>+p&&([e.user_satisfaction.params.date_from,e.user_satisfaction.params.date_to]=[e.user_satisfaction.params.date_to,e.user_satisfaction.params.date_from])},r=()=>{e.user_satisfaction.params={},e.user_satisfaction.params.page=1,a()},f=g=>{const p=new Date,h=new Date;switch(g){case"last-month":{h.setDate(1),h.setMonth(h.getMonth()-1),h.setHours(0,0,0,0),p.setDate(0),p.setHours(23,59,59,999);break}case"current-month":{h.setDate(1),h.setHours(0,0,0,0);break}}e.user_satisfaction.params.date_from=m(h),e.user_satisfaction.params.date_to=m(p),a()},m=g=>{const p=String(g.getDate()).padStart(2,"0"),h=String(g.getMonth()+1).padStart(2,"0"),k=g.getFullYear(),w=String(g.getHours()).padStart(2,"0"),E=String(g.getMinutes()).padStart(2,"0");return`${p}.${h}.${k} ${w}:${E}`};return(g,p)=>{const h=te,k=I;return c(),d("div",Xs,[u("div",Qs,[l(h,{modelValue:n(e).user_satisfaction.params.date_from,"onUpdate:modelValue":p[0]||(p[0]=w=>n(e).user_satisfaction.params.date_from=w),type:"datetime",placeholder:g.$trans("placeholders.date-from"),"value-format":"DD.MM.YYYY HH:mm",format:"DD.MM.YYYY HH:mm",onChange:i},null,8,["modelValue","placeholder"])]),u("div",eo,[l(h,{modelValue:n(e).user_satisfaction.params.date_to,"onUpdate:modelValue":p[1]||(p[1]=w=>n(e).user_satisfaction.params.date_to=w),type:"datetime",placeholder:g.$trans("placeholders.date-to"),"value-format":"DD.MM.YYYY HH:mm",format:"DD.MM.YYYY HH:mm",onChange:i},null,8,["modelValue","placeholder"])]),u("div",to,[l(k,{type:"default",onClick:p[2]||(p[2]=w=>f("last-month"))},{default:b(()=>[U(_(g.$trans("buttons.last-month")),1)]),_:1}),l(k,{type:"default",onClick:p[3]||(p[3]=w=>f("current-month"))},{default:b(()=>[U(_(g.$trans("buttons.current-month")),1)]),_:1}),l(k,{type:"primary",onClick:a},{default:b(()=>[U(_(g.$trans("buttons.search")),1)]),_:1}),s.value?(c(),C(k,{key:0,type:"info",onClick:r},{default:b(()=>[U(_(g.$trans("buttons.clear")),1)]),_:1})):S("",!0)])])}}},oo={class:"user-satisfaction__indicators"},ao={class:"user-satisfaction__indicator user-satisfaction__satisfaction-rate"},no={class:"user-satisfaction__indicator-label"},io={class:"user-satisfaction__indicator user-satisfaction__average-rate"},ro={class:"user-satisfaction__indicator-label"},lo={__name:"UserSatisfactionIndicators",setup(t){const e=v(),s=[{color:"#F56C6C",percentage:40},{color:"#909399",percentage:60},{color:"#67C23A",percentage:100}];return(a,o)=>{const i=Te;return c(),d("div",oo,[u("div",ao,[l(i,{type:"circle",percentage:n(e).user_satisfaction.data.satisfaction_rate,color:s,"stroke-width":20},null,8,["percentage"]),u("div",no,_(a.$trans("satisfaction.satisfaction-rate")),1)]),u("div",io,[l(i,{type:"circle",percentage:n(e).user_satisfaction.data.average_rate_percent,color:s,"stroke-width":20,format:()=>n(e).user_satisfaction.data.average_rate},null,8,["percentage","format"]),u("div",ro,_(a.$trans("satisfaction.average-rate")),1)])])}}},co=V(lo,[["__scopeId","data-v-f33f89b0"]]),uo={class:"user-satisfaction__pagination"},_o={__name:"UserSatisfactionPagination",setup(t){const e=v(),s=a=>{const o=new URLSearchParams(window.location.search);e.user_satisfaction.params=Object.fromEntries(o.entries()),e.user_satisfaction.params.page=a,history.pushState(null,"",`/${P.lng}/user_settings/user_satisfaction/?`+new URLSearchParams(e.user_satisfaction.params).toString()),e.getUserSatisfactionByParams(e.user_satisfaction.params)};return(a,o)=>{const i=xe;return c(),d("div",uo,[l(i,{size:"small",layout:"prev, pager, next",total:n(e).user_satisfaction.data.pagination.total,"current-page":parseInt(n(e).user_satisfaction.params.page),"page-size":n(e).user_satisfaction.data.pagination.per_page,onCurrentChange:s},null,8,["total","current-page","page-size"])])}}},{lng:X}=P;function fo(t){return`/${X}/contacts/user_card/${t}`}function ee(t,e=0){return`/${X}/ticket/list/filter/id/${e}/ticket/${t}`}function po(t){return`/${X}/staff/department/form/edit/${t}`}const mo={class:"user-satisfaction__list"},go=["href"],ho=["href"],vo=["href"],bo=["href"],$o={__name:"UserSatisfactionList",setup(t){const e=v();return(s,a)=>{const o=De,i=Ae;return c(),d("div",mo,[l(i,{data:n(e).user_satisfaction.data.list},{default:b(()=>[l(o,{label:s.$trans("satisfaction.list.created-at")},{default:b(r=>[U(_(r.row.created_at),1)]),_:1},8,["label"]),l(o,{label:s.$trans("satisfaction.list.ticket")},{default:b(r=>[u("a",{href:n(ee)(r.row.ticket.id),target:"_blank"},_(r.row.ticket.title),9,go)]),_:1},8,["label"]),l(o,{label:s.$trans("satisfaction.list.ticket-id")},{default:b(r=>[u("a",{href:n(ee)(r.row.ticket.id),target:"_blank"},_(r.row.ticket.unique_id),9,ho)]),_:1},8,["label"]),l(o,{label:s.$trans("satisfaction.list.client")},{default:b(r=>[u("a",{href:n(fo)(r.row.user.id),target:"_blank"},_(r.row.user.name),9,vo)]),_:1},8,["label"]),l(o,{label:s.$trans("satisfaction.list.department")},{default:b(r=>[u("a",{href:n(po)(r.row.department.id),target:"_blank"},_(r.row.department.name),9,bo)]),_:1},8,["label"]),l(o,{label:s.$trans("satisfaction.list.vote")},{default:b(r=>[U(_(r.row.rate.vote),1)]),_:1},8,["label"]),l(o,{label:s.$trans("satisfaction.list.comment")},{default:b(r=>[U(_(r.row.rate.comment),1)]),_:1},8,["label"])]),_:1},8,["data"])])}}},yo=V($o,[["__scopeId","data-v-18d77d65"]]),So={class:"user-satisfaction__content"},wo={class:"user-satisfaction__block"},ko={class:"user-satisfaction__block"},Vo={__name:"UserSatisfactionContent",setup(t){const e=v();return(s,a)=>{var o,i,r,f;return c(),d("div",So,[l(so),u("div",wo,[l(co)]),u("div",ko,[l(yo)]),((i=(o=n(e).user_satisfaction.data)==null?void 0:o.pagination)==null?void 0:i.total)>((f=(r=n(e).user_satisfaction.data)==null?void 0:r.pagination)==null?void 0:f.per_page)?(c(),C(_o,{key:0})):S("",!0)])}}},Co=V(Vo,[["__scopeId","data-v-10120a1b"]]),Uo={class:"user-satisfaction"},Fo={__name:"UserSatisfaction",setup(t){const e=v(),s=new URLSearchParams(window.location.search);return e.user_satisfaction.params=Object.fromEntries(s.entries()),H(()=>{e.user_satisfaction.params.page||(e.user_satisfaction.params.page=1),e.getUserSatisfactionByParams(e.user_satisfaction.params)}),window.addEventListener("popstate",()=>{const a=new URLSearchParams(window.location.search);e.user_satisfaction.params=Object.fromEntries(a.entries()),e.user_satisfaction.params.page||(e.user_satisfaction.params.page=1),e.getUserSatisfactionByParams(e.user_satisfaction.params)}),(a,o)=>{const i=R;return z((c(),d("div",Uo,[n(e).user_satisfaction.data?(c(),d(D,{key:0},[l(Js),l(Co)],64)):S("",!0)])),[[i,n(e).user_satisfaction.loading]])}}},To=Ee({history:Ie(`/${P.lng}/user_settings`),routes:[{name:"user-settings:profile",path:"",alias:"/profile",component:os},{name:"user-settings:personal-settings",path:"/personal_settings",component:xs},{name:"user-settings:notifications",path:"/notifications",component:Ks},{name:"user-settings:user-satisfaction",path:"/user_satisfaction",component:Fo}]}),Po={class:"user-settings"},xo={__name:"App",setup(t){return(e,s)=>{const a=Be("router-view"),o=Le;return c(),d("div",Po,[l(o,{size:"small",namespace:"el-plus",locale:n(Ye)()},{default:b(()=>[l(a)]),_:1},8,["locale"])])}}};export{y as $,xo as _,To as r};
